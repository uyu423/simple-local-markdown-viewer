<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MD Viewer</title>
  <link rel="stylesheet" href="/src/style.css">
</head>
<body>
  <div id="app">
    <!-- Landing: folder picker -->
    <div id="landing">
      <div class="landing-content">
        <h1>MD Viewer</h1>
        <p>마크다운 파일을 탐색하고 미리보기합니다.</p>

        <!-- Reconnect: 이전 폴더 자동 감지 시 표시 -->
        <button id="reconnectBtn" class="reconnect-btn hidden">
          <span id="reconnectName">folder</span> 다시 연결
        </button>

        <!-- Primary: showDirectoryPicker -->
        <button id="pickBtn" class="pick-btn hidden">폴더 선택</button>

        <!-- Fallback: webkitdirectory -->
        <label id="folderFallback" class="pick-btn hidden">
          폴더 선택
          <input type="file" webkitdirectory multiple hidden>
        </label>
      </div>
    </div>

    <!-- Loading overlay -->
    <div id="loading" class="hidden">
      <div class="loading-content">
        <div class="spinner"></div>
        <p id="loadingText">문서를 불러오는 중...</p>
      </div>
    </div>

    <!-- Editor layout -->
    <div id="editor" class="hidden">
      <div id="sidebar">
        <div class="sidebar-header">
          <div class="sidebar-title-row">
            <span id="rootName">folder</span>
            <div class="title-actions">
              <button id="refreshBtn" class="action-btn" aria-label="새로고침" data-tooltip="새로고침"></button>
              <button id="changeFolderBtn" class="action-btn" aria-label="폴더 변경" data-tooltip="폴더 변경"></button>
              <label id="folderChangeFallbackLabel" class="action-btn" style="cursor:pointer" aria-label="폴더 변경 (파일 선택)" data-tooltip="폴더 변경 (파일 선택)">
                <input type="file" id="folderChange" webkitdirectory multiple hidden>
              </label>
            </div>
          </div>
          <div class="sidebar-actions">
            <button id="viewModeBtn" class="action-btn" aria-label="최근 업데이트 순" data-tooltip="최근 업데이트 순"></button>
            <button id="foldAllBtn" class="action-btn" aria-label="모두 접기" data-tooltip="모두 접기"></button>
            <button id="unfoldAllBtn" class="action-btn" aria-label="모두 펼치기" data-tooltip="모두 펼치기"></button>
            <button id="hiddenToggleBtn" class="action-btn" aria-label="숨김 파일 표시" data-tooltip="숨김 파일 표시"></button>
            <span class="action-spacer"></span>
            <button id="themeToggle" class="action-btn" aria-label="테마 변경" data-tooltip="테마 변경"></button>
          </div>
        </div>
        <div id="searchBox">
          <input type="text" id="searchInput" placeholder="검색 (⌘K)" spellcheck="false">
        </div>
        <div id="searchResults" class="hidden"></div>
        <div id="tree"></div>
        <div class="explorer-footer">
          <div class="explorer-footer-actions">
            <a
              class="action-btn github-link"
              href="https://github.com/uyu423/simple-local-markdown-viewer"
              target="_blank"
              rel="noopener noreferrer"
              title="GitHub 저장소"
              aria-label="GitHub 저장소"
            >
              <svg viewBox="0 0 16 16" aria-hidden="true" focusable="false">
                <path d="M8 0.2a8 8 0 0 0-2.53 15.59c0.4 0.08 0.55-0.17 0.55-0.39v-1.37c-2.24 0.49-2.72-1.08-2.72-1.08c-0.37-0.94-0.9-1.19-0.9-1.19c-0.74-0.5 0.06-0.49 0.06-0.49c0.82 0.06 1.25 0.84 1.25 0.84c0.73 1.25 1.9 0.89 2.37 0.68c0.07-0.53 0.28-0.89 0.51-1.1c-1.79-0.2-3.67-0.9-3.67-4a3.12 3.12 0 0 1 0.83-2.17c-0.08-0.21-0.36-1.03 0.08-2.15c0 0 0.67-0.21 2.2 0.83a7.6 7.6 0 0 1 4.01 0c1.53-1.04 2.2-0.83 2.2-0.83c0.44 1.12 0.16 1.94 0.08 2.15c0.52 0.57 0.83 1.29 0.83 2.17c0 3.11-1.88 3.8-3.68 4c0.29 0.25 0.55 0.74 0.55 1.49v2.21c0 0.22 0.15 0.48 0.56 0.39a8 8 0 0 0-2.53-15.59z" />
              </svg>
            </a>
          </div>
        </div>
      </div>
      <div id="resizer"></div>
      <div id="main">
        <div id="breadcrumb"></div>
        <div id="content">
          <div class="empty-state">왼쪽에서 .md 파일을 선택하세요</div>
        </div>
      </div>
    </div>
  </div>
  <script type="module" src="/src/main.js"></script>
</body>
</html>
